#!/usr/bin/env ruby

unless $:.include? File.expand_path('../../lib', __FILE__)
  $:.unshift File.expand_path('../../lib', __FILE__)
end

require 'flexo'

case ARGV[0]
  when 'init', 'help', 'generate'
    require 'flexo/cli'
    Flexo::CLI.start
  else
    require 'optparse'
    require 'highline/import'

    module Kernel
      def_delegators :$terminal, :color
    end

    require 'flexo/commands'
    require 'flexo/commands/generate'
    args = Flexo::Commands.parse_options!(ARGV.dup)
    Flexo::Commands::Generate.run(args)
end
