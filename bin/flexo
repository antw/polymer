#!/usr/bin/env ruby

unless $:.include?(File.dirname(__FILE__) + '/../lib')
  $:.unshift(File.dirname(__FILE__) + '/../lib')
end

require 'optparse'
require 'rubygems' unless ENV['NORUBYGEMS']

require 'flexo'
require 'highline/import'

module Kernel
  def_delegators :$terminal, :color
end

case ARGV[0]
  when 'init', 'help', 'generate'
    require 'flexo/cli'
    Flexo::CLI.start
  else
    require 'flexo/commands'
    require 'flexo/commands/generate'
    args = Flexo::Commands.parse_options!(ARGV.dup)
    Flexo::Commands::Generate.run(args)
end
